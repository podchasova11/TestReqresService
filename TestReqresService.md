


# Проект: Построение минимального микросервиса с FastApi и тесты

## Описание проекта

Данный проект представляет собой микросервис, реализованный на **FastAPI**, который предоставляет API для управления пользователями.

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone <URL_РЕПОЗИТОРИЯ>
cd project
```

### 2. Установка зависимостей

Рекомендуется создать виртуальное окружение перед установкой зависимостей:

```bash
python -m venv venv
venv\Scripts\activate     # Для Windows
```

Далее установить зависимости:

```bash
pip install -r requirements.txt
```

### 3. Настройка переменных окружения

```
PROD = "https://reqres.in"
TEST = "http://127.0.0.1:8000"

USERS_API = "/api/users"
REGISTER_API = "/api/register"
LOGIN_API = "/api/login"
```

## API эндпоинты


| Метод | URL               | Описание                                                                   |
| ---------- | ----------------- | ---------------------------------------------------------------------------------- |
| `GET`      | `/status`         | Проверка доступности сервиса                             |
| `GET`      | `/api/users/`     | Получение списка пользователей с пагинацией |
| `POST`     | `/api/users/`     | Добавление нового пользователя                         |
| `GET`      | `/api/users/{id}` | Получение информации о пользователе                |
| `PUT`      | `/api/users/{id}` | Обновление данных пользователя                         |
| `DELETE`   | `/api/users/{id}` | Удаление пользователя                                          |

## Запуск тестов

### 1. Запуск всех тестов

```bash
pytest tests/
```

### 2. Запуск отдельных групп тестов

#### Тесты API

```bash
pytest tests/test_login.py
```

## Дополнительная информация

* В проекте используются **pytest** для тестирования, **requests** для взаимодействия с API и **FastAPI** как основной фреймворк.
* В файле **conftest.py** определены фикстуры для работы с API и тестами.


### Объяснение схемы:
 схема используется для валидации объектов, которые должны содержать строго определённые свойства

```json
{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "id": {
            "type": "string"
        },
        "createdAt": {
            "type": "string"
        },
        "job": {
            "type": "string"
        },
        "name": {
            "type": "string"
        }
    },
    "required": [
        "id",
        "createdAt",
        "job",
        "name"
    ]
}
```

### Объяснение:

1. **$schema**: Указывает на версию схемы JSON, используемую в этом документе.

2. **type**: Указывает, что объект должен быть типа `object`.

3. **additionalProperties**: Установлено значение `false`, что означает, что объект не может содержать свойства, не указанные в разделе `properties`. Это помогает ограничить объект только теми свойствами, которые определены, и предотвращает добавление лишних данных.

4. **properties**: Определяет свойства, которые могут присутствовать в объекте. В данном случае это:
   - **id**: Обязательное свойство, которое должно быть строкой.
   - **createdAt**: Обязательное свойство, которое должно быть строкой. Обычно это используется для хранения даты и времени создания объекта.
   - **job**: Обязательное свойство, которое должно быть строкой, представляющее работу или должность пользователя.
   - **name**: Обязательное свойство, которое также должно быть строкой, представляющее имя пользователя.

5. **required**: В этом массиве перечислены свойства, которые обязательно должны присутствовать в объекте. В данном случае все четыре свойства (`id`, `createdAt`, `job`, `name`) должны быть определены.

### Резюме

Эта схема используется для валидации объектов, которые должны содержать строго определённые свойства (id, createdAt, job, name), все из которых являются строками. Нельзя добавлять дополнительные свойства, что обеспечивает строгость данных. 




